#include <stdio.h>
int max(a,b){return(a>b?a:b);}
int arr[503][503]={0};

//Piece data  
//[piece][rotation][index(each block)][index(i,j)]
const int piece[7][4][4][2] = {
{//T
{{0,0},{0,1},{0,2},{1,1}},
{{0,0},{1,0},{1,1},{2,0}},
{{1,0},{1,1},{0,1},{1,2}},
{{0,1},{1,1},{1,0},{2,1}}
},
{//J
{{2,0},{2,1},{1,1},{0,1}},
{{0,0},{1,0},{1,1},{1,2}},
{{0,0},{0,1},{1,0},{2,0}},
{{0,0},{0,1},{0,2},{1,2}}
},
{//L
{{0,2},{1,2},{1,1},{1,0}},
{{0,0},{0,1},{1,1},{2,1}},
{{0,0},{1,0},{0,1},{0,2}},
{{0,0},{1,0},{2,0},{2,1}}
},
{//Z
{{0,0},{0,1},{1,1},{1,2}},
{{0,1},{1,1},{1,0},{2,0}},
{{0,0},{0,1},{1,1},{1,2}},
{{0,1},{1,1},{1,0},{2,0}}
},
{//S
{{0,0},{1,0},{1,1},{2,1}},
{{1,0},{1,1},{0,1},{0,2}},
{{0,0},{1,0},{1,1},{2,1}},
{{1,0},{1,1},{0,1},{0,2}}
},
{//I
{{0,0},{1,0},{2,0},{3,0}},
{{0,0},{0,1},{0,2},{0,3}},
{{0,0},{1,0},{2,0},{3,0}},
{{0,0},{0,1},{0,2},{0,3}}
},
{//O but rly?
{{0,0},{0,1},{1,1},{1,0}},
{{0,0},{0,1},{1,1},{1,0}},
{{0,0},{0,1},{1,1},{1,0}},
{{0,0},{0,1},{1,1},{1,0}}
}
};

int main() {
	int n,m,sum=0;
	scanf("%d %d",&n,&m);
	for(int i = 0;i<n;i++)
		for(int j = 0;j<m;j++)
			scanf("%d",&arr[i][j]);

	for(int i = 0;i<n;i++) {
		for(int j = 0;j<m;j++) {
			for(int p = 0;p<7;p++) {
				for(int r = 0;r<4;r++) {
					int s=0;
					for(int b = 0;b<4;b++) {
						s+=arr[i + piece[p][r][b][0] ][j + piece[p][r][b][1]];
					}
					sum = max(sum,s);
				}
			}
		}
	}
	printf("%d",sum);
}